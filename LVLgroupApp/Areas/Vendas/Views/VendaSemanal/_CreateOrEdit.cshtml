@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer
@using Core.Constants
@using LVLgroupApp.Areas.Vendas.Models.VendaSemanal
@using System.Globalization
@model VendaSemanalComparaViewModel

@{
    var cultureInfo = new CultureInfo("en-US");
    cultureInfo.NumberFormat.NumberDecimalSeparator = ".";
    CultureInfo.DefaultThreadCurrentCulture = cultureInfo;
    CultureInfo.DefaultThreadCurrentUICulture = cultureInfo;
}


<style>
    #LojaDropDown {
        min-width: 500px;
    }

    #VendaAnoAnteriorDropDown {
        min-width: 1050px;
    }
</style>


<form id="create-form" method="post" asp-area="Vendas" asp-controller="VendaSemanal" asp-action="OnPostCreateOrEdit" asp-route-id="@Model.AnoAtual.Id" onsubmit="return jQueryModalPost(this, event, false);" enctype="multipart/form-data">

    <input id="AnoAtual_DataInicialDaSemana" name="AnoAtual.DataInicialDaSemana" type="text" class="form-control" asp-for="@Model.AnoAtual.DataInicialDaSemana" value="@Model.AnoAtual.DataInicialDaSemana.ToShortDateString()" placeholder="name@example.com" hidden>
    <input id="AnoAtual_DataFinalDaSemana" name="AnoAtual.DataFinalDaSemana" type="text" class="form-control" asp-for="@Model.AnoAtual.DataFinalDaSemana" value="@Model.AnoAtual.DataFinalDaSemana.ToShortDateString()" placeholder="name@example.com" hidden>
    <input type="text" id="AnoAtual_Quarter" name="AnoAtual.Quarter" asp-for="@Model.AnoAtual.Quarter" class="form-control" hidden>
    <input type="text" id="AnoAtual_Mes" name="AnoAtual.Mes" asp-for="@Model.AnoAtual.Mes" class="form-control" hidden>


    <div class="row mb-3">
        <div class="col-sm-4">
            @{
                if (Model.AnoAtual.LojaId > 0)
                {
                    <div class="form-floating mb-3">
                        <input id="RangeSemana" name="RangeSemana" type="text" class="form-control" value="@Model.AnoAtual.DataInicialDaSemana.ToShortDateString()" placeholder="name@example.com" disabled>
                        <label class="col-form-label" for="DataInicialDaSemana">@localizer["Semana"]</label>
                    </div>
                }
                else
                {
                    <div class="form-floating mb-3">
                        <input id="RangeSemana" name="RangeSemana" type="text" class="form-control" value="@Model.AnoAtual.DataInicialDaSemana.ToShortDateString()" placeholder="name@example.com">
                        <label class="col-form-label" for="DataInicialDaSemana">@localizer["Semana"]</label>
                    </div>
                }
            }
        </div>
        <div class="col-sm-4">
            @{
                if (Model.AnoAtual.LojaId > 0)
                {
                    <div class="input-group">
                        <span class="input-group-text font-weight-bold"><i class="nav-icon ion ion-ios-calendar" style="font-size: 20px;"></i></span>
                        <div class="form-floating">
                            <input id="AnoAtual_Ano" name="AnoAtual.Ano" type="number" step="1" min="2021" max="2030" class="form-control" asp-for="@Model.AnoAtual.Ano" value="@Model.AnoAtual.Ano" disabled>
                            <label class="col-form-label" for="AnoAtual_Ano">@localizer["Ano"]</label>
                        </div>
                        <div class="form-floating">
                            <input id="AnoAtual_NumeroDaSemana" name="AnoAtual.NumeroDaSemana" type="number" step="1" min="1" max="53" class="form-control" asp-for="@Model.AnoAtual.NumeroDaSemana" value="@Model.AnoAtual.NumeroDaSemana" disabled>
                            <label class="col-form-label" for="AnoAtual_NumeroDaSemana">@localizer["Semana"]</label>
                        </div>
                    </div>
                }
                else
                {
                    <div class="input-group">
                        <span class="input-group-text font-weight-bold"><i class="nav-icon ion ion-ios-calendar" style="font-size: 20px;"></i></span>
                        <div class="form-floating">
                            <input id="AnoAtual_Ano" name="AnoAtual.Ano" type="number" step="1" min="2021" max="2030" class="form-control" asp-for="@Model.AnoAtual.Ano" value="@Model.AnoAtual.Ano" onchange="AnoChanged()">
                            <label class="col-form-label" for="AnoAtual.Ano">@localizer["Ano"]</label>
                        </div>
                        <div class="form-floating">
                            <input id="AnoAtual_NumeroDaSemana" name="AnoAtual.NumeroDaSemana" type="number" step="1" min="1" max="53" class="form-control" asp-for="@Model.AnoAtual.NumeroDaSemana" onchange="SemanaChanged()">
                            <label class="col-form-label" for="NumeroDaSemana">@localizer["Semana"]</label>
                        </div>
                    </div>
                }
            }
        </div>
        <div class="col-sm-2">
            <div class="dropdown">

                <button id="LojaSelector" type="button" class="btn btn-outline-secondary w-100 dropdown-toggle" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                    @localizer["Loja"]
                    <span id="loja-alert" class="invalid-alert" hidden>
                        <i class="bi bi-exclamation-triangle-fill" style="color:red"></i>
                    </span>
                </button>
                <div id="LojaDropDown" class="dropdown-menu dropdown-menu-end p-2">
                    <div class="row mt-3">
                        <div class="col-sm-6">
                            <input type="text" id="AnoAtual_MercadoId" name="AnoAtual.MercadoId" asp-for="@Model.AnoAtual.MercadoId" class="form-control" hidden>
                            @{
                                if (Model.AnoAtual.MercadoId > 0) 
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectMercadoId" class="form-select" id="SelectMercadoId" asp-items="@Model.AnoAtual.Mercados" data-placeholder='@localizer["Selecione um mercado"]' disabled>
                                        </select>
                                        <label class="col-form-label" for="SelectMercadoId">@localizer["Mercado"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.MercadoId" class="text-danger"></span></small>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectMercadoId" class="form-select" id="SelectMercadoId" asp-items="@Model.AnoAtual.Mercados" data-placeholder='@localizer["Selecione um mercado"]'>
                                            <option value="0">@localizer["Selecione um mercado"]</option>
                                        </select>
                                        <label class="col-form-label" for="SelectMercadoId">@localizer["Mercado"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.MercadoId" class="text-danger"></span></small>
                                    </div>
                                }
                            }
                        </div>
                        <div class="col-sm-6">
                            <input type="text" id="AnoAtual_EmpresaId" name="AnoAtual.EmpresaId" asp-for="@Model.AnoAtual.EmpresaId" class="form-control" hidden>
                            @{
                                if (Model.AnoAtual.EmpresaId > 0)
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectEmpresaId" class="form-select" id="SelectEmpresaId" asp-items="@Model.AnoAtual.Empresas" data-placeholder='@localizer["Selecione uma empresa"]' disabled>
                                        </select>
                                        <label class="col-form-label" for="SelectEmpresaId">@localizer["Empresa"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.EmpresaId" class="text-danger"></span></small>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectEmpresaId" class="form-select" id="SelectEmpresaId" asp-items="@Model.AnoAtual.Empresas" data-placeholder='@localizer["Selecione uma empresa"]'>
                                            <option value="0">@localizer["Selecione uma empresa"]</option>
                                        </select>
                                        <label class="col-form-label" for="SelectEmpresaId">@localizer["Empresa"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.EmpresaId" class="text-danger"></span></small>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-sm-6">
                            <input type="text" id="AnoAtual_GrupolojaId" name="AnoAtual.GrupolojaId" asp-for="@Model.AnoAtual.GrupolojaId" class="form-control" hidden>
                            @{
                                if (Model.AnoAtual.GrupolojaId > 0)
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectGrupolojaId" class="form-select" id="SelectGrupolojaId" asp-items="@Model.AnoAtual.GruposLojas" data-placeholder='@localizer["Selecione um agrupamento"]' disabled>
                                        </select>
                                        <label class="col-form-label" for="SelectGrupolojaId">@localizer["Agrupamento"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.GrupolojaId" class="text-danger"></span></small>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectGrupolojaId" class="form-select" id="SelectGrupolojaId" asp-items="@Model.AnoAtual.GruposLojas" data-placeholder='@localizer["Selecione um agrupamento"]'>
                                            <option></option>
                                        </select>
                                        <label class="col-form-label" for="SelectGrupolojaId">@localizer["Agrupamento"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.GrupolojaId" class="text-danger"></span></small>
                                    </div>
                                }
                            }
                        </div>
                        <div class="col-sm-6"> 
                            @{
                                if (Model.AnoAtual.LojaId > 0)
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectLojaId" class="form-select" id="SelectLojaId" asp-items="@Model.AnoAtual.Lojas" data-placeholder='@localizer["Selecione uma loja"]' disabled>
                                        </select>
                                        <label class="col-form-label" for="SelectLojaId">@localizer["Loja"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.LojaId" class="text-danger"></span></small>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-floating mb-3">
                                        <select name="SelectLojaId" class="form-select" id="SelectLojaId" asp-items="@Model.AnoAtual.Lojas" data-placeholder='@localizer["Selecione uma loja"]'>
                                            <option></option>
                                        </select>
                                        <label class="col-form-label" for="SelectLojaId">@localizer["Loja"]</label>
                                        <small><span asp-validation-for="@Model.AnoAtual.LojaId" class="text-danger"></span></small>
                                    </div>
                                }
                            }
                            <input type="text" id="AnoAtual_LojaId" name="AnoAtual.LojaId" asp-for="@Model.AnoAtual.LojaId" class="form-control" hidden>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2">
            <div class="dropdown">
                <button id="VendaAnoAnterior" type="button" class="btn btn-outline-secondary w-100 dropdown-toggle" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                    @localizer["Ano anterior"]
                </button>
                <div id="VendaAnoAnteriorDropDown" class="dropdown-menu dropdown-menu-end border border-info border-2 p-2">
                    <div class="row d-none d-lg-flex pb-0">
                        <div class="col-lg-1 col-6"></div>
                        <div class="col-lg-2 col-6 text-center">@localizer["Venda"]</div>
                        <div class="col-lg-2 col-6 text-center">@localizer["Conv."]</div>
                        <div class="col-lg-2 col-6 text-center">@localizer["Artigos"]</div>
                        <div class="col-lg-5 col-12 text-center">@localizer["Observações"]</div>
                    </div>

                    @* 2ª feira *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["2ª feira"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_Valor2Feira" name="AnoAnterior.Valor2Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Valor2Feira" value="@Model.AnoAnterior.Valor2Feira" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_Conv2Feira" name="AnoAnterior.Conv2Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Conv2Feira" value="@Model.AnoAnterior.Conv2Feira" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="AnoAnterior_TotalArtigos2Feira" name="AnoAnterior.TotalArtigos2Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigos2Feira" value="@Model.AnoAnterior.TotalArtigos2Feira" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Observacoes2Feira" name="AnoAnterior.Observacoes2Feira" asp-for="@Model.AnoAnterior.Observacoes2Feira" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Weather2Feira" name="AnoAnterior.Weather2Feira" asp-for="@Model.AnoAnterior.Weather2Feira" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio2f_aa" id="2f_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="2f_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* 3ª feira *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["3ª feira"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_Valor3Feira" name="AnoAnterior.Valor3Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Valor3Feira" value="@Model.AnoAnterior.Valor3Feira" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_Conv3Feira" name="AnoAnterior.Conv3Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Conv3Feira" value="@Model.AnoAnterior.Conv3Feira" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="TotalArtigos3feira_aa" name="TotalArtigos3feira_aa" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigos3Feira" value="@Model.AnoAnterior.TotalArtigos3Feira" readonly>
                        </div>
                        <div class="col-lg-5 col-12"> 
                            <input type="text" class="form-control" id="AnoAnterior_Observacoes3Feira" name="AnoAnterior.Observacoes3Feira" asp-for="@Model.AnoAnterior.Observacoes3Feira" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Weather3Feira" name="AnoAnterior.Weather3Feira" asp-for="@Model.AnoAnterior.Weather3Feira" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_cloudy_aa"><i class="bi bi-cloudy"></i></label> 

                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio3f_aa" id="3f_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="3f_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* 4ª feira *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["4ª feira"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_Valor4Feira" name="AnoAnterior.Valor4Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Valor4Feira" value="@Model.AnoAnterior.Valor4Feira" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_Conv4Feira" name="AnoAnterior.Conv4Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Conv4Feira" value="@Model.AnoAnterior.Conv4Feira" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="AnoAnterior.TotalArtigos4Feira" name="AnoAnterior.TotalArtigos4Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigos4Feira" value="@Model.AnoAnterior.TotalArtigos4Feira" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Observacoes4Feira" name="AnoAnterior.Observacoes4Feira" asp-for="@Model.AnoAnterior.Observacoes4Feira" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Weather4Feira" name="AnoAnterior.Weather4Feira" asp-for="@Model.AnoAnterior.Weather4Feira" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio4f_aa" id="4f_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="4f_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* 5ª feira *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["5ª feira"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_Valor5Feira" name="AnoAnterior.Valor5Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Valor5Feira" value="@Model.AnoAnterior.Valor5Feira" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_Conv5Feira" name="AnoAnterior.Conv5Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Conv5Feira" value="@Model.AnoAnterior.Conv5Feira" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="AnoAnterior_TotalArtigos5Feira" name="AnoAnterior.TotalArtigos5Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigos5Feira" value="@Model.AnoAnterior.TotalArtigos5Feira" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Observacoes5Feira" name="AnoAnterior.Observacoes5Feira" asp-for="@Model.AnoAnterior.Observacoes5Feira" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Weather5Feira" name="AnoAnterior.Weather5Feira" asp-for="@Model.AnoAnterior.Weather5Feira" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio5f_aa" id="5f_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="5f_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* 6ª feira *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["Sexta-feira"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_Valor6Feira" name="AnoAnterior.Valor6Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Valor6Feira" value="@Model.AnoAnterior.Valor6Feira" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_Conv6Feira" name="AnoAnterior.Conv6Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.Conv6Feira" value="@Model.AnoAnterior.Conv6Feira" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="TotalArtigos6feira_aa" name="AnoAnterior.TotalArtigos6Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigos6Feira" value="@Model.AnoAnterior.TotalArtigos6Feira" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Observacoes6Feira" name="AnoAnterior.Observacoes6Feira" asp-for="@Model.AnoAnterior.Observacoes6Feira" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_Weather6Feira" name="AnoAnterior.Weather6Feira" asp-for="@Model.AnoAnterior.Weather6Feira" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradio6f_aa" id="6f_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="6f_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* sábado *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["Sábado"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_ValorSábado" name="AnoAnterior.ValorSábado" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.ValorSábado" value="@Model.AnoAnterior.ValorSábado" readonly>                               
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_ConvSab" name="AnoAnterior.ConvSab" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.ConvSab" value="@Model.AnoAnterior.ConvSab" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="AnoAnterior_TotalArtigosSab" name="AnoAnterior.TotalArtigosSab" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigosSab" value="@Model.AnoAnterior.TotalArtigosSab" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_ObservacoesSab" name="AnoAnterior.ObservacoesSab" asp-for="@Model.AnoAnterior.ObservacoesSab" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_WeatherSab" name="AnoAnterior.WeatherSab" asp-for="@Model.AnoAnterior.WeatherSab" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioSab_aa" id="sab_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="sab_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* domingo *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["Domingo"]</div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_ValorDomingo" name="AnoAnterior.ValorDomingo" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.ValorDomingo" value="@Model.AnoAnterior.ValorDomingo" readonly>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <div class="input-group">
                                <input id="AnoAnterior_ConvDom" name="AnoAnterior.ConvDom" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAnterior.ConvDom" value="@Model.AnoAnterior.ConvDom" readonly>
                                <span class="input-group-text font-weight-bold">%</span>
                            </div>
                        </div>
                        <div class="col-lg-2 col-6">
                            <input id="AnoAnterior_TotalArtigosDom" name="AnoAnterior.TotalArtigosDom" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAnterior.TotalArtigosDom" value="@Model.AnoAnterior.TotalArtigosDom" readonly>
                        </div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_ObservacoesDom" name="AnoAnterior.ObservacoesDom" asp-for="@Model.AnoAnterior.ObservacoesDom" readonly>
                        </div>
                    </div>
                    <div class="row pb-0 g-1">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5 col-12">
                            <input type="text" class="form-control" id="AnoAnterior_WeatherDom" name="AnoAnterior.WeatherDom" asp-for="@Model.AnoAnterior.WeatherDom" hidden>
                            <div class="input-group d-flex justify-content-end">
                                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                                    <span class="input-group-text">@localizer["Meteo."]</span>
                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_sun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_sun_aa"><i class="bi bi-sun"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_cloudsun_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_cloudsun_aa"><i class="bi bi-cloud-sun"></i></i></label>

                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_cloudy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_cloudy_aa"><i class="bi bi-cloudy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_cloudrain_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_cloudrain_aa"><i class="bi bi-cloud-rain"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_cloudrainheavy_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_cloudrainheavy_aa"><i class="bi bi-cloud-rain-heavy"></i></label>

                                    <input type="radio" class="btn-check" name="btnradioDom_aa" id="dom_cloudsnow_aa" autocomplete="off" readonly>
                                    <label class="btn btn-outline-secondary" for="dom_cloudsnow_aa"><i class="bi bi-cloud-snow"></i></label>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* total *@
                    <div class="row pb-0 g-1">
                        <div class="col-lg-1 col-6">
                            <div class="text-start">@localizer["Total"]</div>
                        </div>
                        <div class="col-sm-2">
                            <div class="input-group">
                                <span class="input-group-text font-weight-bold">€</span>
                                <input id="AnoAnterior_ValorTotalDaVenda" name="AnoAnterior.ValorTotalDaVenda" type="number" class="form-control" asp-for="@Model.AnoAnterior.ValorTotalDaVenda" value="@Model.AnoAnterior.ValorTotalDaVenda" placeholder="name@example.com" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr />

    <div class="row d-none d-lg-flex pb-0">
        <div class="col-lg-1 col-6"></div>
        <div class="col-lg-2 col-6 text-center">@localizer["Venda"]</div>
        <div class="col-lg-2 col-6 text-center">@localizer["Conv."]</div>
        <div class="col-lg-2 col-6 text-center">@localizer["Artigos"]</div>
        <div class="col-lg-5 col-12 text-center">@localizer["Observações"]</div>
    </div>

    @* segunda-feira *@
    <div class="row pb-0 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["2ª feira"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_Valor2Feira" name="AnoAtual.Valor2Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Valor2Feira" value="@Model.AnoAtual.Valor2Feira" onchange="calculateSum()">
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">                
                <input id="AnoAtual_Conv2Feira" name="AnoAtual.Conv2Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Conv2Feira" value="@Model.AnoAtual.Conv2Feira">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigos2Feira" name="AnoAtual.TotalArtigos2Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigos2Feira" value="@Model.AnoAtual.TotalArtigos2Feira">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Observacoes2Feira" name="AnoAtual.Observacoes2Feira" asp-for="@Model.AnoAtual.Observacoes2Feira">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Weather2Feira" name="AnoAtual.Weather2Feira" asp-for="@Model.AnoAtual.Weather2Feira" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_sun" autocomplete="off" data-diadasemana="2Feira" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="2f_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_cloudsun" autocomplete="off" data-diadasemana="2Feira" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="2f_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_cloudy" autocomplete="off" data-diadasemana="2Feira" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="2f_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_cloudrain" autocomplete="off" data-diadasemana="2Feira" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="2f_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_cloudrainheavy" autocomplete="off" data-diadasemana="2Feira" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="2f_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio2f" id="2f_cloudsnow" autocomplete="off" data-diadasemana="2Feira" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="2f_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>                
            </div>            
        </div>
    </div>

    @* terça-feira *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["3ª feira"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_Valor3Feira" name="AnoAtual.Valor3Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Valor3Feira" value="@Model.AnoAtual.Valor3Feira" onchange="calculateSum()">              
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_Conv3Feira" name="AnoAtual.Conv3Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Conv3Feira" value="@Model.AnoAtual.Conv3Feira">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigos3Feira" name="AnoAtual.TotalArtigos3Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigos3Feira" value="@Model.AnoAtual.TotalArtigos3Feira">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Observacoes3Feira" name="AnoAtual.Observacoes3Feira" asp-for="@Model.AnoAtual.Observacoes3Feira">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Weather3Feira" name="AnoAtual.Weather3Feira" asp-for="@Model.AnoAtual.Weather3Feira" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_sun" autocomplete="off" data-diadasemana="3Feira" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="3f_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_cloudsun" autocomplete="off" data-diadasemana="3Feira" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="3f_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_cloudy" autocomplete="off" data-diadasemana="3Feira" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="3f_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_cloudrain" autocomplete="off" data-diadasemana="3Feira" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="3f_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_cloudrainheavy" autocomplete="off" data-diadasemana="3Feira" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="3f_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio3f" id="3f_cloudsnow" autocomplete="off" data-diadasemana="3Feira" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="3f_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>            
        </div>
    </div>

    @* quarta-feira *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["4ª feira"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_Valor4Feira" name="AnoAtual.Valor4Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Valor4Feira" value="@Model.AnoAtual.Valor4Feira" onchange="calculateSum()">              
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_Conv4Feira" name="AnoAtual.Conv4Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Conv4Feira" value="@Model.AnoAtual.Conv4Feira">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigos4Feira" name="AnoAtual.TotalArtigos4Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigos4Feira" value="@Model.AnoAtual.TotalArtigos4Feira">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Observacoes4Feira" name="AnoAtual.Observacoes4Feira" asp-for="@Model.AnoAtual.Observacoes4Feira">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Weather4Feira" name="AnoAtual.Weather4Feira" asp-for="@Model.AnoAtual.Weather4Feira" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_sun" autocomplete="off" data-diadasemana="4Feira" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="4f_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_cloudsun" autocomplete="off" data-diadasemana="4Feira" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="4f_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_cloudy" autocomplete="off" data-diadasemana="4Feira" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="4f_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_cloudrain" autocomplete="off" data-diadasemana="4Feira" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="4f_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_cloudrainheavy" autocomplete="off" data-diadasemana="4Feira" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="4f_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio4f" id="4f_cloudsnow" autocomplete="off" data-diadasemana="4Feira" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="4f_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>            
        </div>  
    </div>

    @* quinta-feira *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["5ª feira"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_Valor5Feira" name="AnoAtual.Valor5Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Valor5Feira" value="@Model.AnoAtual.Valor5Feira" onchange="calculateSum()">
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_Conv5Feira" name="AnoAtual.Conv5Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Conv5Feira" value="@Model.AnoAtual.Conv5Feira">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigos5Feira" name="AnoAtual.TotalArtigos5Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigos5Feira" value="@Model.AnoAtual.TotalArtigos5Feira">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Observacoes5Feira" name="AnoAtual.Observacoes5Feira" asp-for="@Model.AnoAtual.Observacoes5Feira">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Weather5Feira" name="AnoAtual.Weather5Feira" asp-for="@Model.AnoAtual.Weather5Feira" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_sun" autocomplete="off" data-diadasemana="5Feira" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="5f_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_cloudsun" autocomplete="off" data-diadasemana="5Feira" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="5f_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_cloudy" autocomplete="off" data-diadasemana="5Feira" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="5f_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_cloudrain" autocomplete="off" data-diadasemana="5Feira" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="5f_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_cloudrainheavy" autocomplete="off" data-diadasemana="5Feira" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="5f_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio5f" id="5f_cloudsnow" autocomplete="off" data-diadasemana="5Feira" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="5f_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>            
        </div>    
    </div>

    @* sexta-feira *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["6ª feira"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_Valor6Feira" name="AnoAtual.Valor6Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Valor6Feira" value="@Model.AnoAtual.Valor6Feira" onchange="calculateSum()">               
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_Conv6Feira" name="AnoAtual.Conv6Feira" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.Conv6Feira" value="@Model.AnoAtual.Conv6Feira">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigos6Feira" name="AnoAtual.TotalArtigos6Feira" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigos6Feira" value="@Model.AnoAtual.TotalArtigos6Feira">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Observacoes6Feira" name="AnoAtual.Observacoes6Feira" asp-for="@Model.AnoAtual.Observacoes6Feira">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_Weather6Feira" name="AnoAtual.Weather6Feira" asp-for="@Model.AnoAtual.Weather6Feira" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_sun" autocomplete="off" data-diadasemana="6Feira" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="6f_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_cloudsun" autocomplete="off" data-diadasemana="6Feira" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="6f_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_cloudy" autocomplete="off" data-diadasemana="6Feira" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="6f_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_cloudrain" autocomplete="off" data-diadasemana="6Feira" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="6f_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_cloudrainheavy" autocomplete="off" data-diadasemana="6Feira" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="6f_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradio6f" id="6f_cloudsnow" autocomplete="off" data-diadasemana="6Feira" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="6f_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>            
        </div>
    </div>

    @* sábado *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["Sábado"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_ValorSábado" name="AnoAtual.ValorSábado" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ValorSábado" value="@Model.AnoAtual.ValorSábado" onchange="calculateSum()">
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_ConvSab" name="AnoAtual.ConvSab" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ConvSab" value="@Model.AnoAtual.ConvSab">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigosSab" name="AnoAtual.TotalArtigosSab" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigosSab" value="@Model.AnoAtual.TotalArtigosSab">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_ObservacoesSab" name="AnoAtual.ObservacoesSab" asp-for="@Model.AnoAtual.ObservacoesSab">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_WeatherSab" name="AnoAtual.WeatherSab" asp-for="@Model.AnoAtual.WeatherSab" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_sun" autocomplete="off" data-diadasemana="Sabado" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="sab_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_cloudsun" autocomplete="off" data-diadasemana="Sabado" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="sab_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_cloudy" autocomplete="off" data-diadasemana="Sabado" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="sab_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_cloudrain" autocomplete="off" data-diadasemana="Sabado" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="sab_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_cloudrainheavy" autocomplete="off" data-diadasemana="Sabado" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="sab_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradioSab" id="sab_cloudsnow" autocomplete="off" data-diadasemana="Sabado" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="sab_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>            
        </div>
    </div>

    @* domingo *@
    <div class="row pb-0 mt-1 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["Domingo"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_ValorDomingo" name="AnoAtual.ValorDomingo" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ValorDomingo" value="@Model.AnoAtual.ValorDomingo" onchange="calculateSum()">
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <input id="AnoAtual_ConvDom" name="AnoAtual.ConvDom" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ConvDom" value="@Model.AnoAtual.ConvDom">
                <span class="input-group-text font-weight-bold">%</span>
            </div>
        </div>
        <div class="col-lg-2 col-6">
            <input id="AnoAtual_TotalArtigosDom" name="AnoAtual.TotalArtigosDom" type="number" min="0" step="1" class="form-control" asp-for="@Model.AnoAtual.TotalArtigosDom" value="@Model.AnoAtual.TotalArtigosDom">
        </div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_ObservacoesDom" name="AnoAtual.ObservacoesDom" asp-for="@Model.AnoAtual.ObservacoesDom">
        </div>
    </div>
    <div class="row pb-0 g-1">
        <div class="col-lg-7"></div>
        <div class="col-lg-5 col-12">
            <input type="text" class="form-control" id="AnoAtual_WeatherDom" name="AnoAtual.WeatherDom" asp-for="@Model.AnoAtual.WeatherDom" hidden>
            <div class="input-group d-flex justify-content-end">
                <div class="btn-group btn-group" role="group" aria-label="Basic radio toggle button group">
                    <span class="input-group-text">@localizer["Meteo."]</span>
                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_sun" autocomplete="off" data-diadasemana="Domingo" data-weather="Sun">
                    <label class="btn btn-outline-secondary" for="dom_sun"><i class="bi bi-sun"></i></label>

                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_cloudsun" autocomplete="off" data-diadasemana="Domingo" data-weather="CloudSun">
                    <label class="btn btn-outline-secondary" for="dom_cloudsun"><i class="bi bi-cloud-sun"></i></i></label>

                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_cloudy" autocomplete="off" data-diadasemana="Domingo" data-weather="Cloudy">
                    <label class="btn btn-outline-secondary" for="dom_cloudy"><i class="bi bi-cloudy"></i></label>

                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_cloudrain" autocomplete="off" data-diadasemana="Domingo" data-weather="CloudRain">
                    <label class="btn btn-outline-secondary" for="dom_cloudrain"><i class="bi bi-cloud-rain"></i></label>

                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_cloudrainheavy" autocomplete="off" data-diadasemana="Domingo" data-weather="CloudRainHeavy">
                    <label class="btn btn-outline-secondary" for="dom_cloudrainheavy"><i class="bi bi-cloud-rain-heavy"></i></label>

                    <input type="radio" class="btn-check" name="btnradioDom" id="dom_cloudsnow" autocomplete="off" data-diadasemana="Domingo" data-weather="CloudSnow">
                    <label class="btn btn-outline-secondary" for="dom_cloudsnow"><i class="bi bi-cloud-snow"></i></label>
                </div>
            </div>          
        </div>
    </div>

    @* total *@
     <div class="row pb-0 mt-2 g-1">
        <div class="col-lg-1 col-6">
            <div class="text-start">@localizer["Total"]</div>
        </div>
        <div class="col-lg-2 col-6">
            <div class="input-group">
                <span class="input-group-text font-weight-bold">€</span>
                <input id="AnoAtual_ValorTotalDaVenda" name="AnoAtual.ValorTotalDaVenda" type="number" class="form-control" asp-for="@Model.AnoAtual.ValorTotalDaVenda" value="@Model.AnoAtual.ValorTotalDaVenda" readonly>
            </div>
        </div>
    </div>

    <hr />

    @{
        if (Model.CurrentRole.IsSuperAdmin)
        {
            <div class="row mt-1">
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_ValorTotalDaVendaDoAnoAnterior" name="AnoAtual.ValorTotalDaVendaDoAnoAnterior" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ValorTotalDaVendaDoAnoAnterior" value="@Model.AnoAtual.ValorTotalDaVendaDoAnoAnterior" placeholder="name@example.com" readonly>
                            <label class="col-form-label" for="AnoAtual_ValorTotalDaVendaDoAnoAnterior">@localizer["Venda ano anterior"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">€</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_VariaçaoAnual" name="AnoAtual.VariaçaoAnual" type="number" step="0.01" class="form-control" asp-for="@Model.AnoAtual.VariaçaoAnual" value="@Model.AnoAtual.VariaçaoAnual" placeholder="name@example.com" onchange="updateObjetivo()">
                            <label class="col-form-label" for="AnoAtual_VariaçaoAnual">@localizer["Variação anual"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">%</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_ObjetivoDaVendaSemanal" name="AnoAtual.ObjetivoDaVendaSemanal" type="number" min="0.00" step="0.01" class="form-control " asp-for="@Model.AnoAtual.ObjetivoDaVendaSemanal" value="@Model.AnoAtual.ObjetivoDaVendaSemanal" placeholder="name@example.com" onchange="updateVariacao()">
                            <label class="col-form-label" for="AnoAtual_ObjetivoDaVendaSemanal">@localizer["Objetivo"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">€</span>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="row mt-1">
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_ValorTotalDaVendaDoAnoAnterior" name="AnoAtual.ValorTotalDaVendaDoAnoAnterior" type="number" min="0.00" step="0.01" class="form-control" asp-for="@Model.AnoAtual.ValorTotalDaVendaDoAnoAnterior" value="@Model.AnoAtual.ValorTotalDaVendaDoAnoAnterior" placeholder="name@example.com" readonly>
                            <label class="col-form-label" for="AnoAtual_ValorTotalDaVendaDoAnoAnterior">@localizer["Venda ano anterior"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">€</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_VariaçaoAnual" name="AnoAtual.VariaçaoAnual" type="number" step="0.01" class="form-control" asp-for="@Model.AnoAtual.VariaçaoAnual" value="@Model.AnoAtual.VariaçaoAnual" placeholder="name@example.com" readonly>
                            <label class="col-form-label" for="AnoAtual_VariaçaoAnual">@localizer["Variação anual"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">%</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="input-group mb-3">
                        <div class="form-floating">
                            <input id="AnoAtual_ObjetivoDaVendaSemanal" name="AnoAtual.ObjetivoDaVendaSemanal" type="number" min="0.00" step="0.01" class="form-control " asp-for="@Model.AnoAtual.ObjetivoDaVendaSemanal" value="@Model.AnoAtual.ObjetivoDaVendaSemanal" placeholder="name@example.com" readonly>
                            <label class="col-form-label" for="AnoAtual_ObjetivoDaVendaSemanal">@localizer["Objetivo"]</label>
                        </div>
                        <span class="input-group-text font-weight-bold">€</span>
                    </div>
                </div>
            </div>
        }
    }

    <br />
    <br/>

    <div class="form-group justify-content-between" style="margin-bottom: 0px !important">
        @if ((AuthorizationService.AuthorizeAsync(User, Permissions.Vendas.Edit)).Result.Succeeded)
        {
            <button type="submit" class="btn btn-success">@localizer["Salvar"]</button>
        }
        <button type="button" class="btn btn-secondary close-button" data-bs-dismiss="modal">@localizer["Cancelar"]</button>
    </div>
</form>


<!-- jquery-validation translated messages -->
@{
    string messageFile = @localizer["messages_pt.js"].Value;
    string url = "/lib/jquery-validation/" + messageFile;
}
<script type="text/javascript" src=@url></script>


<script type="text/javascript" language=javascript>

    $("#create-form").removeData("validator");

    jQuery.validator.addMethod("loja", function (value, element) {
        //loja selecionada
        console.log("validator loja : value = " + value);
        if(value > 0) return true;
        return false;
    });

    jQuery.validator.addMethod("maiorque", function (value, element, param) {
        console.log("validator maiorque : value = " + value);
        console.log("validator maiorque : param = " + param);
        if(value > param) return true;
        return false;
    });

    $("#create-form").validate({
        rules: {
            'AnoAtual.LojaId': {
                loja: true
            },
            'AnoAtual.ValorTotalDaVenda': {
                min: 0
            },
            'AnoAtual.ObjetivoDaVendaSemanal': {
                maiorque: 5
            }
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.addClass("invalid-feedback");
            error.insertAfter(element);
            // if ($(element).hasClass("form-select")) {
            //     error.insertAfter($(element).parent());
            // }
            // else
            // {
            //     error.insertAfter(element);
            // }
        },
        highlight: function (element) {
            //console.log('highlight => ' + $(element).attr('id'));
            $(element).removeClass('is-valid').addClass('is-invalid');
            if ($(element).attr('id') === 'AnoAtual_LojaId') {
                //console.log('highlight => AnoAtual_LojaId');
                $("#loja-alert").attr('hidden', false)
            }
        },
        unhighlight: function (element) {
            console.log('unhighlight => ' + $(element).attr('id'));
            $(element).removeClass('is-invalid').addClass('is-valid');
            if ($(element).attr('id') === 'AnoAtual_LojaId') {
                //console.log('highlight => AnoAtual_LojaId');
                $("#loja-alert").attr('hidden', true)
            }
        }
    });

    // function updateSmallBox() {
    //     $('#box-valordavenda').text($('#AnoAtual_ValorTotalDaVenda').val());
    //     console.log('updateSmallBox');
    // };

    function updateObjetivo() {
        let val_1 = parseFloat(document.getElementById("AnoAtual_ValorTotalDaVendaDoAnoAnterior").value === "" ? 0 : document.getElementById("AnoAtual_ValorTotalDaVendaDoAnoAnterior").value);
        let val_2 = parseFloat(document.getElementById("AnoAtual_VariaçaoAnual").value === "" ? 0 : document.getElementById("AnoAtual_VariaçaoAnual").value);

        let roundedTotal = Math.round((val_1 + (val_1 * val_2 / 100)) * 100) / 100;
        $('#AnoAtual_ObjetivoDaVendaSemanal').val(roundedTotal);
        console.log("AnoAtual_ValorTotalDaVendaDoAnoAnterior = " + val_1 + " | AnoAtual_VariaçaoAnual = " + val_2 + " | AnoAtual_ObjetivoDaVendaSemanal = " + roundedTotal);
    }

    function updateVariacao() {
        let val_1 = parseFloat(document.getElementById("AnoAtual_ValorTotalDaVendaDoAnoAnterior").value  === "" ? 0 : document.getElementById("AnoAtual_ValorTotalDaVendaDoAnoAnterior").value);
        let val_2 = parseFloat(document.getElementById("AnoAtual_ObjetivoDaVendaSemanal").value === "" ? 0 : document.getElementById("AnoAtual_ObjetivoDaVendaSemanal").value);

        if (val_1 == 0) 
        {
            $('#AnoAtual_VariaçaoAnual').val(0);
        }
        else
        {
            let roundedTotal = Math.round(((val_2 - val_1) * 100 / val_1) * 100) / 100;
            $('#AnoAtual_VariaçaoAnual').val(roundedTotal);
            console.log("AnoAtual_ValorTotalDaVendaDoAnoAnterior = " + val_1 + " | AnoAtual_ObjetivoDaVendaSemanal = " + val_2 + " | AnoAtual_VariaçaoAnual = " + roundedTotal);
        }
    }

    function calculateSum() {
        let val_1 = parseFloat(document.getElementById("AnoAtual_Valor2Feira").value === "" ? 0 : document.getElementById("AnoAtual_Valor2Feira").value);
        let val_2 = parseFloat(document.getElementById("AnoAtual_Valor3Feira").value === "" ? 0 : document.getElementById("AnoAtual_Valor3Feira").value);
        let val_3 = parseFloat(document.getElementById("AnoAtual_Valor4Feira").value === "" ? 0 : document.getElementById("AnoAtual_Valor4Feira").value);
        let val_4 = parseFloat(document.getElementById("AnoAtual_Valor5Feira").value === "" ? 0 : document.getElementById("AnoAtual_Valor5Feira").value);
        let val_5 = parseFloat(document.getElementById("AnoAtual_Valor6Feira").value === "" ? 0 : document.getElementById("AnoAtual_Valor6Feira").value);
        let val_6 = parseFloat(document.getElementById("AnoAtual_ValorSábado").value === "" ? 0 : document.getElementById("AnoAtual_ValorSábado").value);
        let val_7 = parseFloat(document.getElementById("AnoAtual_ValorDomingo").value === "" ? 0 : document.getElementById("AnoAtual_ValorDomingo").value);
        let roundedTotal = Math.round((val_1 + val_2 + val_3 + val_4 + val_5 + val_6 + val_7) * 100) / 100;
        $('#AnoAtual_ValorTotalDaVenda').val(roundedTotal);
    }

    function updateVendaAnoAnterior() {

        console.log('updateVendaAnoAnterior()');

        const _lojaId = $("#AnoAtual_LojaId").val();
        const _ano = $("#AnoAtual_Ano").val() - 1;
        const _semana = $("#AnoAtual_NumeroDaSemana").val();
        let total = 0;

        var _url = "/Vendas/VendaSemanal/GetVendaSemanal?lojaId=" + _lojaId + '&ano=' + _ano + '&semana=' + _semana;
        var formData = new FormData();
        formData.append("lojaId", _lojaId);
        formData.append("ano", _ano);
        formData.append("semana", _semana);

        $.ajax(
            {
                type: "POST",
                url: _url,
                processData: false,
                contentType: false,
                data: formData,
                dataType: 'json',
                success: function (data) {
                    console.log('updateVendaAnoAnterior() = success');
                    let vs = JSON.parse(data);

                    $("#AnoAnterior_Valor2Feira").val(vs.vendaSemanal.Valor2Feira);
                    $("#AnoAnterior_Valor3Feira").val(vs.vendaSemanal.Valor3Feira);
                    $("#AnoAnterior_Valor4Feira").val(vs.vendaSemanal.Valor4Feira);
                    $("#AnoAnterior_Valor5Feira").val(vs.vendaSemanal.Valor5Feira);
                    $("#AnoAnterior_Valor6Feira").val(vs.vendaSemanal.Valor6Feira);
                    $("#AnoAnterior_ValorSábado").val(vs.vendaSemanal.ValorSábado);
                    $("#AnoAnterior_ValorDomingo").val(vs.vendaSemanal.ValorDomingo);
                    $("#AnoAnterior_ValorTotalDaVenda").val(vs.vendaSemanal.ValorTotalDaVenda);

                    $("#AnoAtual_ValorTotalDaVendaDoAnoAnterior").val(vs.vendaSemanal.ValorTotalDaVenda);
                    updateObjetivo();


                    let str = JSON.stringify(data, null, 4); // (Optional) beautiful indented output.
                    console.log(str); // Logs output to dev tools console.

                },
                error: function (data) {
                    console.log("Error occurs");
                    let str = JSON.stringify(data, null, 4); // (Optional) beautiful indented output.
                    console.log(data.length); // Logs output to dev tools console.
                }
            }
        );
    }

    function LoadGrupolojaSelect_coe(empId) {
        //alert("Empresa changed = " + empId);

        var _empresaId = empId;
        var _url = "/Business/Grupoloja/LoadGruposlojas?empresaId=_empresaId";
        var formData = new FormData();
        formData.append("empresaId", _empresaId);

        $.ajax(
            {
                type: "POST",
                url: _url,
                processData: false,
                contentType: false,
                data: formData,
                dataType: 'json',
                success: function (data) {
                    var _list = JSON.parse(data);
                    //$("#AnoAtual_GrupolojaId").val(0);
                    $('#SelectGrupolojaId').find('option').remove();
                    $(_list.gruposlojasList).each(function () {
                        let option = document.createElement('option');
                        $(option).val(this.Value).text(this.Text);
                        $(option).appendTo("#SelectGrupolojaId");
                    });
                    $("#AnoAtual_GrupolojaId").val($("#SelectGrupolojaId").val());
                    LoadLojaSelect_coe($("#SelectGrupolojaId").val());
                },
                error: function () {
                    alert("Error occurs");
                }
            }
        );
    };

    function LoadLojaSelect_coe(grupoId) {
        //alert("Grupoloja changed = " + grupoId);

        var _grupolojaId = grupoId;
        var _url = "/Business/Loja/LoadLojasInGrupoloja?grupolojaId=_grupolojaId";
        var formData = new FormData();
        formData.append("grupolojaId", _grupolojaId);

        $.ajax(
            {
                type: "POST",
                url: _url,
                processData: false,
                contentType: false,
                data: formData,
                dataType: 'json',
                success: function (data) {
                    var _list = JSON.parse(data);
                    // $("#AnoAtual_LojaId").val(0);
                    $('#SelectLojaId').find('option').remove();
                    $(_list.lojasList).each(function () {
                        let option = document.createElement('option');
                        $(option).val(this.Value).text(this.Text);
                        $(option).appendTo("#SelectLojaId");
                    });
                    $("#AnoAtual_LojaId").val($("#SelectLojaId").val());
                    $('#AnoAtual_LojaId').valid();
                    console.log("lojaId foi atualizada = " + $("#AnoAtual_LojaId").val());
                    updateVendaAnoAnterior();
                },
                error: function () {
                    alert("Error occurs");
                }
            }
        );

    };

    function LoadLojaSelectFromMercado_coe(mercadoId) {

        var _mercadoId = mercadoId;
        var _url = "/Business/Loja/LoadLojasInMercado?mercadoId=_mercadoId";
        var formData = new FormData();
        formData.append("mercadoId", _mercadoId);

        $.ajax(
            {
                type: "POST",
                url: _url,
                processData: false,
                contentType: false,
                data: formData,
                dataType: 'json',
                success: function (data) {
                    var _list = JSON.parse(data);
                    // $("#AnoAtual_LojaId").val(0);
                    $('#SelectLojaId').find('option').remove();
                    $(_list.lojasList).each(function () {
                        let option = document.createElement('option');
                        $(option).val(this.Value).text(this.Text);
                        $(option).appendTo("#SelectLojaId");
                    });
                    $("#AnoAtual_LojaId").val($("#SelectLojaId").val());
                    $('#AnoAtual_LojaId').valid();
                    console.log("lojaId foi atualizada = " + $("#AnoAtual_LojaId").val());
                    updateVendaAnoAnterior();
                },
                error: function () {
                    alert("Error occurs");
                }
            }
        );

    };

    function InitWeather() {

        // console.log("Model.AnoAtual.Weather2Feira = " + '@Model.AnoAtual.Weather2Feira');
        $("input[name=btnradio2f][data-weather ='@Model.AnoAtual.Weather2Feira']").prop('checked', true);
        $("input[name=btnradio3f][data-weather ='@Model.AnoAtual.Weather3Feira']").prop('checked', true);
        $("input[name=btnradio4f][data-weather ='@Model.AnoAtual.Weather4Feira']").prop('checked', true);
        $("input[name=btnradio5f][data-weather ='@Model.AnoAtual.Weather5Feira']").prop('checked', true);
        $("input[name=btnradio6f][data-weather ='@Model.AnoAtual.Weather6Feira']").prop('checked', true);
        $("input[name=btnradioSab][data-weather ='@Model.AnoAtual.WeatherSab']").prop('checked', true);
        $("input[name=btnradioDom][data-weather ='@Model.AnoAtual.WeatherDom']").prop('checked', true);
    };

    InitWeather();

    $("input[name=btnradio2f]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather 2f = " + weather);
        $("#AnoAtual_Weather2Feira").val(weather);
        console.log("AnoAtual_Weather2Feira = " + $("#AnoAtual_Weather2Feira").val());
    });

    $("input[name=btnradio3f]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather 3f = " + weather);
        $("#AnoAtual_Weather3Feira").val(weather);
        console.log("AnoAtual_Weather3Feira = " + $("#AnoAtual_Weather3Feira").val());
    });

    $("input[name=btnradio4f]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather 4f = " + weather);
        $("#AnoAtual_Weather4Feira").val(weather);
        console.log("AnoAtual_Weather4Feira = " + $("#AnoAtual_Weather4Feira").val());
    });

    $("input[name=btnradio5f]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather 5f = " + weather);
        $("#AnoAtual_Weather5Feira").val(weather);
        console.log("AnoAtual_Weather5Feira = " + $("#AnoAtual_Weather5Feira").val());
    });

    $("input[name=btnradio6f]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather 6f = " + weather);
        $("#AnoAtual_Weather6Feira").val(weather);
        console.log("AnoAtual_Weather6Feira = " + $("#AnoAtual_Weather6Feira").val());
    });

    $("input[name=btnradioSab]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather sab = " + weather);
        $("#AnoAtual_WeatherSab").val(weather);
        console.log("AnoAtual_WeatherSab = " + $("#AnoAtual_WeatherSab").val());
    });

    $("input[name=btnradioDom]").on("change", function () {
        let weather = this.getAttribute("data-weather");
        console.log("data-weather dom = " + weather);
        $("#AnoAtual_WeatherDom").val(weather);
        console.log("AnoAtual_WeatherDom = " + $("#AnoAtual_WeatherDom").val());
    });

    $('#SelectMercadoId').select2({
        theme: 'bootstrap-5',
        width: '100%',
        escapeMarkup: function (m) {
            return m;
        },
        dropdownParent: $('#form-modal')
    });

    $('#SelectEmpresaId').select2({
        theme: 'bootstrap-5',
        width: '100%',
        escapeMarkup: function (m) {
            return m;
        },
        dropdownParent: $('#form-modal')
    });

    $('#SelectGrupolojaId').select2({
        theme: 'bootstrap-5',
        width: '100%',
        escapeMarkup: function (m) {
            return m;
        },
        dropdownParent: $('#form-modal')
    });

    $('#SelectLojaId').select2({
        theme: 'bootstrap-5',
        width: '100%',
        escapeMarkup: function (m) {
            return m;
        },
        dropdownParent: $('#form-modal')
    });


    $("#SelectMercadoId").on("change", function () {
        $("#MercadoId").val(this.value);
        if (this.value > 0) 
        {
            // selecionar loja atraves do Mercado
            $('#SelectEmpresaId').val(0);
            $('#SelectGrupolojaId').find('option').remove();
            $('#SelectLojaId').find('option').remove();
            $('#SelectEmpresaId').prop('disabled', true);
            $('#SelectGrupolojaId').prop('disabled', true);
            LoadLojaSelectFromMercado_coe(this.value);
        }
        else
        {
            // selecionar loja atraves da Empresa
            $('#SelectEmpresaId').prop('disabled', false);
            $('#SelectGrupolojaId').prop('disabled', false);
            console.log("MercadoId=0, selecionar loja atravez da Empresa, #AnoAtual_EmpresaId=" + $('#AnoAtual_EmpresaId').val());
            LoadGrupolojaSelect_coe($('#AnoAtual_EmpresaId').val());
        }
    });

    $("#SelectEmpresaId").on("change", function () {
        $("#AnoAtual_EmpresaId").val(this.value);
        if (this.value > 0) 
        {
            // selecionar loja atraves da Empresa
            $('#SelectMercadoId').prop('disabled', true);
            LoadGrupolojaSelect_coe(this.value);
        }
        else 
        { 
            // selecionar loja atraves do Mercado
            $('#SelectEmpresaId').val(0);
            $('#SelectGrupolojaId').find('option').remove();
            $('#SelectLojaId').find('option').remove();
            $('#SelectMercadoId').prop('disabled', false);
            //LoadLojaSelect_coe(this.value);
        }
    });

    $("#SelectGrupolojaId").on("change", function () {
        $("#AnoAtual_GrupolojaId").val(this.value);
        LoadLojaSelect_coe(this.value);
    });

    $("#SelectLojaId").on("change", function () {
        $("#AnoAtual_LojaId").val(this.value);
        $('#AnoAtual_LojaId').valid();
        console.log("lojaId foi atualizada = " + $("#AnoAtual_LojaId").val());
        updateVendaAnoAnterior();
    });

    flatpickr.l10ns.default.firstDayOfWeek = 1; // Monday

    var rangeSemana = $('#RangeSemana').flatpickr({
        "plugins": [new weekSelect({})],
        onClose(date, dateStr, instance) {
            instance.input.value = [
                instance.weekStartDay,
                instance.weekEndDay,
            ]
                .map(d => instance.formatDate(d, '@localizer["d-m-Y"]'))
                .join('    ->    ');
        },
        onChange(date, dateStr, instance) { 
            let year = parseFloat(this.currentYear === "" ? 0 : this.currentYear);
            console.log("onChange flatpicker year = " + year);
            const weekNumber = this.selectedDates[0]
                ? this.config.getWeek(this.selectedDates[0])
                : null;
            $('#AnoAtual_DataInicialDaSemana').val(this.selectedDates[0]);
            $('#RangeSemana').valid();
            console.log("flatpicker weekNumber = " + weekNumber);
            updateAnoSemana(year, weekNumber);
            updateVendaAnoAnterior();
        },
        weekNumbers: true,
        dateFormat: '@localizer["d-m-Y"]',
        locale: '@localizer["pt"]'
    });

    if ($("#AnoAtual_Ano").val() > 0) {
        let wNumber = document.querySelector("#RangeSemana")._flatpickr.config.getWeek(document.querySelector("#RangeSemana")._flatpickr.selectedDates[0])
        $('#AnoAtual_NumeroDaSemana').val(wNumber);
        document.querySelector("#RangeSemana")._flatpickr.input.value = [
            document.querySelector("#RangeSemana")._flatpickr.weekStartDay,
            document.querySelector("#RangeSemana")._flatpickr.weekEndDay,
        ]
            .map(d => document.querySelector("#RangeSemana")._flatpickr.formatDate(d, '@localizer["d-m-Y"]'))
            .join('    ->    ');

        console.log("Num = " + $('#AnoAtual_NumeroDaSemana').val());
    }
    else
    {
        //document.querySelector("#RangeSemana")._flatpickr.input.value = "";
    }

    function updateRangeSemana() {

        const _ano = $("#AnoAtual_Ano").val();
        const _semana = $("#AnoAtual_NumeroDaSemana").val();

        var _url = '/Vendas/VendaSemanal/GetMondayDate?ano=' + _ano + '&semana=' + _semana;
        var formData = new FormData();
        formData.append("ano", _ano);
        formData.append("semana", _semana);

        $.ajax(
            {
                type: "POST",
                url: _url,
                processData: false,
                contentType: false,
                data: formData,
                dataType: 'json',
                success: function (data) {
                    let vt = JSON.parse(data);
                    console.log("vt.weekStartDate = " + vt.weekStartDate);

                    // Split the string into day, month, and year parts
                    const partsNovaData = vt.weekStartDate.split("/");

                    const isEng = ('@localizer["pt"]' == 'en');

                    // Create a new Date object by passing the year, month (0-based), and day as arguments
                    const novaData = isEng ? new Date(partsNovaData[2], partsNovaData[0] - 1, partsNovaData[1]) : new Date(partsNovaData[2], partsNovaData[1] - 1, partsNovaData[0]);
                    console.log("novaData = " + novaData);

                    rangeSemana.setDate(novaData, true, '@localizer["d-m-Y"]');
                    rangeSemana.input.value = [rangeSemana.weekStartDay, rangeSemana.weekEndDay]
                        .map(d => rangeSemana.formatDate(d, '@localizer["d-m-Y"]'))
                        .join('    ->    ');
                    $('#AnoAtual_DataInicialDaSemana').val(novaData.toDateString());
                },
                error: function () {
                    alert("Error occurs");
                }
            }
        );
    }

    function updateAnoSemana(ano, semana) {
        if ($('#AnoAtual_Ano').val() != ano) {
            $('#AnoAtual_Ano').val(ano);
            updateVendaAnoAnterior();
        }
        $('#AnoAtual_NumeroDaSemana').val(semana);
        console.log("Update Ano = " + $('#AnoAtual_Ano').val() + " | Semana = " + $('#AnoAtual_NumeroDaSemana').val());
    }

    function AnoChanged() {
        console.log("Ano changed. " + $("#AnoAtual_Ano").val());
        updateRangeSemana();
        updateVendaAnoAnterior();
    }

    function SemanaChanged() {
        console.log("Semana changed.");
        updateRangeSemana();
    }

</script>